/*
 * angular-downloadsvg-directive 0.0.16
 * (c) 2014 Hypercubed <hypercubed@gmail.com>
 * Licensed MIT
 */
!function(){"use strict";function a(a,b,c){var d={};angular.forEach(c,function(a,c){var e=b.css(c);e!==a&&(d[c]=e)}),a.css(d)}function b(b,c){var d=b.clone(!1),e=b.find("*");return d.find("*").each(function(b){var d=$(e.get(b)),f=$(this);a(f,d,c)}),d}var c={"alignment-baseline":"auto","baseline-shift":"baseline",clip:"auto","clip-path":"none","clip-rule":"nonzero",color:"rgb(51, 51, 51)","color-interpolation":"srgb","color-interpolation-filters":"linearrgb","color-profile":"auto","color-rendering":"auto",cursor:"auto",direction:"ltr",display:"inline","dominant-baseline":"auto","enable-background":"accumulate",fill:"rgb(0, 0, 0)","fill-opacity":"1","fill-rule":"nonzero",filter:"none","flood-color":"rgb(0, 0, 0)","flood-opacity":"1",font:"","font-family":"","font-size":"medium","font-size-adjust":"none","font-stretch":"normal","font-style":"normal","font-variant":"normal","font-weight":"normal","glyph-orientation-horizontal":"0deg","glyph-orientation-vertical":"auto","image-rendering":"auto",kerning:"auto","letter-spacing":"normal","lighting-color":"rgb(255, 255, 255)",marker:"","marker-end":"none","marker-mid":"none","marker-start":"none",mask:"none",opacity:"1",overflow:"visible","pointer-events":"auto","shape-rendering":"auto","stop-color":"rgb(0, 0, 0)","stop-opacity":"1",stroke:"none","stroke-dasharray":"none","stroke-dashoffset":"0","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-opacity":"1","stroke-width":"1","text-anchor":"start","text-decoration":"none","text-rendering":"auto","unicode-bidi":"normal",visibility:"visible","word-spacing":"normal","writing-mode":"lr-tb"};angular.module("hc.downloader",[]).factory("svgDownload",["$log","$window",function(a,d){function e(){var b=!0;return void 0===d.saveAs&&(a.warn("svgDownload Error: FileSaver not loaded.  See installation instructions."),b=!1),void 0===d.Blob&&(a.warn("svgDownload Error: W3C Blob interface not available.  Try adding https://github.com/eligrey/Blob.js."),b=!1),b}return e(),function(f){if(e()){var g=angular.element(f);if("svg"!==g.prop("tagName")&&(g=g.find("svg")),g.length<1)return a.warn("svgDownload Error: Element "+f+" not found"),null;g=b(g,c),g.attr("version",1.1).attr("xmlns","http://www.w3.org/2000/svg");var h=g[0].outerHTML||(new d.XMLSerializer).serializeToString(g[0]),i=new d.Blob([h],{type:"text/xml"});return{getHtml:function(){return h},getBlob:function(){return i},asSvg:function(a){d.saveAs(i,a)}}}}}]).directive("svgDownload",["svgDownload",function(a){return{restrict:"A",link:function(b,c,d){function e(){var b=encodeURI(d.filename||d.title||"untitled")+".svg",c=a(d.svgDownload||"body");c&&c.asSvg(b)}c.on("click",function(){e()})}}}])}();